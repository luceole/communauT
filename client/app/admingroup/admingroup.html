<div ng-include="'components/navbar/navbar.html'"></div>

<div class="container">
Administrations des groupes  
<form >
    <input ng-model="search.$" placeholder="Recherche globale">
</form>

<dir-pagination-controls boundary-links="true" on-page-change="pageChangeHandler(newPageNumber)" template-url="app/utilisateurs/dirPagination.tpl.html"></dir-pagination-controls>
<br>
<span> <a href ng-click="add(groupe)" rel="tooltip" title="Ajouter" class="trash"><div class="glyphicon glyphicon-plus">Créer un groupe</div></a></span>
<table class="table table-striped " >
  <tr dir-paginate="groupe in groupes | orderBy:'name' | filter:search:strict | itemsPerPage :'12' ">
<td>
<span> <a href ng-click="edit(groupe)" rel="tooltip" title="Modifier" class="trash"><div class="glyphicon glyphicon-pencil pull-right"></div></a></span>
</td>
 <td>
        <strong>{{groupe.name}}</strong>
</td>
<td>
         {{groupe.info}}
</td> 
<td ng-switch="groupe.type">
  <strong ng-switch-when="0">Ouvert</strong>
  <strong ng-switch-when="5">Modéré</strong>
  <strong ng-switch-when="10">Réservé</strong>
  <strong ng-switch-default>{{groupe.type}}</strong>
</td>
<td>
{{groupe.owner.uid}} 
</td>
<td> 
Membre(s): {{groupe.participants.length}}
</td>
<td>
<span ng-show="groupe.participants.length===0"> <a href ng-click="delete(groupe)" rel="tooltip" title="Effacer" class="trash"><div class="glyphicon glyphicon-trash pull-right"></div></a></span>
</td>
</tr>
</table>

<script type="text/ng-template" id="modalEditAdminGroup.html">
<div class="modal-header">
<h3 class="modal-title">Modification de {{groupe.name}}</h3>
</div>
<div class="modal-body">

<form class="form" name="editerForm" ng-submit="editer(editerForm)" novalidate>

<div class="form-group" ng-class="{ 'has-success': editerForm.name.$valid && submitted,
                                    'has-error': editerForm.name.$invalid && submitted }">
Description
<input type="text" name="info" class="form-control" ng-model="groupe.info"
      required   style="width:350px"/>
      <p class="help-block" ng-show="editerForm.info.$error.required && submitted">
      Description Obligatoire
      </p>
      </div>
Type (0 Ouvert - 10 Reservé )
<input type="text" name="type" class="form-control" ng-model="groupe.type"
      required   style="width:350px"/>
      <p class="help-block" ng-show="editerForm.info.$error.required && submitted">
      Type Obligatoire
      </p>
      </div>
Propriétaire  
<ui-select ng-model="person.selected"   ng-disable="disabled" style="width: 300px;" title="Propiétaire" >
<ui-select-match placeholder="Selection dans la liste...">{{$select.selected.uid}}</ui-select-match>
<ui-select-choices  repeat="person in users | filter: $select.search|orderBy:'uid'">
<div ng-bind-html="person.uid  | highlight: $select.search"></div>
<span ng-bind-html="person.structure | highlight: $select.search"></span>
</ui-select-choices>
</ui-select>
</div>
<div class="modal-footer">
   <button class="btn btn-primary" ng-click="ok(editerForm)">OK</button>
   <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
</div>
{{person.selected}}
</script>

<script type="text/ng-template" id="modalAddAdminGroup.html">
<div class="modal-header">
<h3 class="modal-title">Création d'un groupe</h3>
</div>
<div class="modal-body">

<form class="form" name="addForm"  novalidate>

<div class="form-group" ng-class="{ 'has-success': addForm.name.$valid && submitted,
                                    'has-error': addForm.name.$invalid && submitted }">
Nom
<input type="text" name="name" class="form-control" ng-model="groupe.name"
      required   style="width:350px"/>
      <p class="help-block" ng-show="addForm.info.$error.required && submitted">
      Nom Obligatoire
      </p>
Description
<input type="text" name="info" class="form-control" ng-model="groupe.info"
      required   style="width:350px"/>
      <p class="help-block" ng-show="addForm.info.$error.required && submitted">
      Description Obligatoire
      </p>
      </div>
Type (0 Ouvert - 10 Reservé )
<input type="text" name="type" class="form-control" ng-model="groupe.type"
      required   style="width:350px"/>
      <p class="help-block" ng-show="addForm.info.$error.required && submitted">
      Type Obligatoire
      </p>
      </div>
Propriétaire  
<ui-select ng-model="person.selected"   ng-disable="disabled" style="width: 300px;" title="Propiétaire" >
<ui-select-match placeholder="Selection dans la liste...">{{$select.selected.uid}}</ui-select-match>
<ui-select-choices  repeat="person in users | filter: $select.search|orderBy:'uid'">
<div ng-bind-html="person.uid  | highlight: $select.search"></div>
<span ng-bind-html="person.structure | highlight: $select.search"></span>
</ui-select-choices>
</ui-select>
</div>
<div class="modal-footer">
   <button class="btn btn-primary" ng-click="ok(addForm)">OK</button>
   <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
</div>
{{person.selected}}
</script>
</div>
